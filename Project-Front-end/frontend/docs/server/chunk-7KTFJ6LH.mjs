import './polyfills.server.mjs';
import{a as E}from"./chunk-LIO2IOWW.mjs";import{$ as w,A as et,C as nt,H as it,I as at,K as ot,L as S,M as rt,N as st,O as ct,Q as mt,R as lt,S as dt,V as pt,W as gt,a as G,aa as ut,b as L,ba as kt,ca as ft,da as I,ea as D,m as U,p as q,q as W,r as J,s as K,t as Q,u as X,v as Y,y as Z,z as tt}from"./chunk-SKPDWZLL.mjs";import{Eb as i,Fb as n,Gb as u,Hb as b,Kb as _,Mb as d,Pc as h,Qb as A,Qc as $,Tc as y,U as N,Uc as z,V,Xa as r,Xb as H,Ya as m,Yb as a,Z as j,Zb as s,fc as M,gc as x,ha as f,ia as C,ib as P,jb as R,nb as g,wb as l}from"./chunk-2CCXKE3L.mjs";import"./chunk-X2SEQXRR.mjs";var O="http://localhost:8080/",k=class o{constructor(e){this.http=e}getTaskbyId(e){return this.http.get(`${O}api/employee/task/${e}`,{headers:this.createAuthorizationHeader()})}getTaskbyUserId(e){let t=E.getUserId();return this.http.get(`${O}api/employee/tasks/${t}`,{headers:this.createAuthorizationHeader()})}getCommentsByTaskId(e){return this.http.get(`${O}api/employee/task/${e}/comments`,{headers:this.createAuthorizationHeader()})}createComment(e,t){let c={taskId:e,postedBy:E.getUserId()};return this.http.post(`${O}api/employee/task/comment`,t,{params:c,headers:this.createAuthorizationHeader()})}updateTask(e,t){return this.http.put(`${O}api/employee/task/${e}/${t}`,{headers:this.createAuthorizationHeader()})}createAuthorizationHeader(){return new G().set("Authorization","Bearer "+E.getToken())}static \u0275fac=function(t){return new(t||o)(j(L))};static \u0275prov=N({token:o,factory:o.\u0275fac,providedIn:"root"})};function yt(o,e){if(o&1){let t=b();i(0,"mat-card",3)(1,"div",4)(2,"h2",5),a(3),n(),i(4,"p",6),a(5),n(),u(6,"mat-divider"),i(7,"div",7)(8,"div",8)(9,"span",9),a(10,"Due Date :"),n(),i(11,"span",10),a(12),M(13,"date"),n()(),i(14,"div",8)(15,"span",9),a(16,"Employee :"),n(),i(17,"span",10),a(18),n()(),i(19,"div",8)(20,"span",9),a(21,"Priority :"),n(),i(22,"span",10),a(23),n()(),i(24,"div",8)(25,"span",9),a(26,"Status :"),n(),i(27,"span",10),a(28),n()()(),u(29,"mat-divider"),i(30,"div",11)(31,"button",12)(32,"mat-icon"),a(33,"visibility"),n()(),i(34,"button",13)(35,"mat-icon"),a(36,"edit"),n()(),i(37,"mat-menu",null,0)(39,"button",14),_("click",function(){let p=f(t).$implicit,v=d();return C(v.updateStatus(p.id,"INPROGRESS"))}),a(40,"INPROGRESS"),n(),i(41,"button",14),_("click",function(){let p=f(t).$implicit,v=d();return C(v.updateStatus(p.id,"COMPLETED"))}),a(42,"COMPLETED"),n()()()()()}if(o&2){let t=e.$implicit,c=H(38);r(3),s(t.title),r(2),s(t.description),r(7),s(x(13,9,t.dueDate,"MMM d, y")),r(6),s(t.employeeName),r(5),s(t.priority),r(5),s(t.taskStatus),r(3),A("routerLink","/employee/task/",t.id,"/view"),r(3),l("matMenuTriggerFor",c)}}var T=class o{constructor(e,t){this.service=e;this.snackbar=t}listOfTasks=[];id;ngOnInit(){this.getTasks()}getTasks(){this.service.getTaskbyUserId(this.id).subscribe(e=>{console.log(e),this.listOfTasks=e})}updateStatus(e,t){this.service.updateTask(e,t).subscribe(c=>{c.id!=null?(this.snackbar.open("Task updated successfully","close",{duration:5e3}),this.getTasks()):this.snackbar.open("Someting went Wrong","close",{duration:5e3})})}static \u0275fac=function(t){return new(t||o)(m(k),m(D))};static \u0275cmp=P({type:o,selectors:[["app-employee-dashboard"]],decls:2,vars:1,consts:[["statusMenu","matMenu"],[1,"task-list"],["class","task-card",4,"ngFor","ngForOf"],[1,"task-card"],[1,"task-details"],[1,"task-name"],[1,"task-description"],[1,"task-info"],[1,"info-row"],[1,"info-label"],[1,"info-value"],[1,"actions"],["mat-icon-button","","color","accent",1,"view-button",3,"routerLink"],["mat-icon-button","","color","primary",1,"update-button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"]],template:function(t,c){t&1&&(i(0,"div",1),g(1,yt,43,12,"mat-card",2),n()),t&2&&(r(),l("ngForOf",c.listOfTasks))},dependencies:[I,h,W,at,ot,S,w,kt,ut,ft,y],styles:[".task-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;background-color:#f8f8f8;min-height:37vh;padding:20px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]{width:calc(33.33% - 20px);margin-bottom:20px;border-radius:10px;box-shadow:0 2px 6px #0003}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]{padding:20px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .task-name[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#108ee9;margin-bottom:10px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .task-description[_ngcontent-%COMP%]{margin-bottom:10px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .task-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-bottom:10px;margin-top:10px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .task-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{flex:0 0 50%;display:flex;align-items:center;margin-bottom:8px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .task-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-weight:10px;margin-right:5px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .task-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-weight:700}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:10px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .update-button[_ngcontent-%COMP%], .task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .view-button[_ngcontent-%COMP%]{margin-right:10px}"]})};function St(o,e){if(o&1&&(i(0,"mat-card",11)(1,"div",12)(2,"h2",13),a(3),n(),i(4,"p",14),a(5),n(),u(6,"mat-divider"),i(7,"div",15)(8,"div",16)(9,"span",17),a(10,"Due Date :"),n(),i(11,"span",18),a(12),M(13,"date"),n()(),i(14,"div",16)(15,"span",17),a(16,"Employee :"),n(),i(17,"span",18),a(18),n()(),i(19,"div",16)(20,"span",17),a(21,"Priority :"),n(),i(22,"span",18),a(23),n()(),i(24,"div",16)(25,"span",17),a(26,"Status :"),n(),i(27,"span",18),a(28),n()()()()()),o&2){let t=d(2);r(3),s(t.taskData.title),r(2),s(t.taskData.description),r(7),s(x(13,6,t.taskData.dueDate,"MMM d, y")),r(6),s(t.taskData.employeeName),r(5),s(t.taskData.priority),r(5),s(t.taskData.taskStatus)}}function wt(o,e){if(o&1&&(i(0,"mat-card",9)(1,"mat-card-header")(2,"div",19)(3,"mat-card-title"),a(4),n(),i(5,"mat-card-subtitle"),a(6),M(7,"date"),n()()(),i(8,"mat-card-content"),a(9),n()()),o&2){let t=e.$implicit;r(4),s(t.postedName),r(2),s(x(7,3,t.createdAt,"medium")),r(3),s(t.content)}}function It(o,e){if(o&1){let t=b();i(0,"div",1)(1,"div",2),g(2,St,29,9,"mat-card",3),n(),i(3,"mat-card",4)(4,"mat-card-content")(5,"h4"),a(6,"Publish your Comment"),n(),i(7,"div")(8,"form",5)(9,"mat-form-field",6)(10,"mat-label"),a(11,"Content"),n(),u(12,"textarea",7),n(),i(13,"button",8),_("click",function(){f(t);let p=d();return C(p.publishComment())}),a(14,"Publish Comment "),n()()()()(),i(15,"div",9)(16,"h4"),a(17,"Comments"),n(),g(18,wt,10,6,"mat-card",10),n()()}if(o&2){let t=d();r(2),l("ngIf",t.taskData),r(6),l("formGroup",t.commentForm),r(5),l("disabled",!t.commentForm.valid),r(5),l("ngForOf",t.comments)}}var F=class o{constructor(e,t,c,p,v){this.service=e;this.fb=t;this.router=c;this.snackbar=p;this.activatedRoute=v}id;commentForm;taskData;comments;ngOnInit(){this.id=this.activatedRoute.snapshot.params.id,this.commentForm=this.fb.group({content:[null,[Q.required]]}),this.getTaskById()}getTaskById(){this.service.getTaskbyId(this.id).subscribe(e=>{console.log(e),this.taskData=e,this.getCommentsTaskId()})}getCommentsTaskId(){this.service.getCommentsByTaskId(this.id).subscribe(e=>{console.log(e),this.comments=e})}publishComment(){this.service.createComment(this.id,this.commentForm.get("content")?.value).subscribe(e=>{console.log(e),e.id!=null?(this.snackbar.open("Comments publish successfully","close",{duration:5e3}),this.getCommentsTaskId()):this.snackbar.open("Something went wrong","error",{duration:5e3})})}static \u0275fac=function(t){return new(t||o)(m(k),m(nt),m(q),m(D),m(U))};static \u0275cmp=P({type:o,selectors:[["app-view-task-details"]],decls:1,vars:1,consts:[["class","card-container",4,"ngIf"],[1,"card-container"],[1,"task-list"],["class","task-card",4,"ngIf"],[1,"comment-card"],[3,"formGroup"],["appearance","fill"],["matInput","","formControlName","Content"],["mat-raised-button","","color","primary",2,"float","right",3,"click","disabled"],[2,"margin-top","10px"],["style","margin-top: 10px;",4,"ngFor","ngForOf"],[1,"task-card"],[1,"task-details"],[1,"task-name"],[1,"task-description"],[1,"task-info"],[1,"info-row"],[1,"info-label"],[1,"info-value"],["mat-card-avatar","",1,"example-header-image"]],template:function(t,c){t&1&&g(0,It,19,4,"div",0),t&2&&l("ngIf",c.taskData)},dependencies:[I,h,$,Z,K,X,Y,tt,et,it,S,lt,st,mt,ct,rt,pt,dt,gt,w,y],styles:[".task-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;min-height:37vh;padding:20px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]{margin-bottom:20px;border-radius:10px;box-shadow:0 2px 6px #0003;width:100%}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]{padding:20px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .task-name[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#108ee9;margin-bottom:10px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .task-description[_ngcontent-%COMP%]{margin-bottom:10px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .task-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-bottom:10px;margin-top:10px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .task-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{flex:0 0 50%;display:flex;align-items:center;margin-bottom:8px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .task-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-weight:10px;margin-right:5px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .task-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-weight:700}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:10px}.task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .update-button[_ngcontent-%COMP%], .task-list[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .view-button[_ngcontent-%COMP%]{margin-right:10px}.card-container[_ngcontent-%COMP%]{margin:16px;max-width:60%;padding-bottom:30px}mat-card[_ngcontent-%COMP%]{padding:10px}.example-header-image[_ngcontent-%COMP%]{background-image:url(https://material.angular.io/assets/img/examples/shiba1.jpg);background-size:cover}mat-card-content[_ngcontent-%COMP%]{margin-top:10px}mat-card-footer[_ngcontent-%COMP%]{margin-left:20px}.comment-card[_ngcontent-%COMP%]{margin-top:20px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]})};var Et=[{path:"dashboard",component:T},{path:"task/:id/view",component:F}],_t=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=R({type:o});static \u0275inj=V({providers:[J(Et)],imports:[z]})};export{_t as EmployeeModule};
